<div class="header toolbar">
  <app-page-components-select class="flex-110" [(components)]="components"></app-page-components-select>
  <div class="actions toolbar">
    <button mat-raised-button color="primary" (click)="resetPage()">清空</button>
    <button mat-raised-button color="primary">预览</button>
    <button mat-raised-button color="primary">保存</button>
  </div>
</div>
<div class="flex-row flex-110" style="overflow: hidden">
  <div class="显示内容"></div>
  <div #workSpaceEl class="work-space" [style]="workSpaceStyle()">
    <ng-scrollbar class="enable-x">
      <div #pageEl class="page" [style]="pageStyle()" (pointerdown)="onPagePointerDown($event)" (pointerup)="onPagePointerUp($event)">
        <app-page-components-diaplay
          [(components)]="components"
          [(activeComponent)]="activeComponent"
          [(activeComponent2)]="activeComponent2"
        ></app-page-components-diaplay>
      </div>
    </ng-scrollbar>
    @if (componentMenuStyle(); as style) {
      <div
        #componentMenu
        class="componet-menu item"
        [style]="style"
        cdkDrag
        cdkDragBoundary=".work-space"
        (cdkDragEnded)="moveComponentMenuEnd($event)"
      >
        <div class="toolbar">
          <div class="name" cdkDragHandle>组件设置</div>
          <button mat-icon-button (click)="closeComponentMenu()"><mat-icon>close</mat-icon></button>
        </div>
        <app-page-component-config2
          [(components)]="components"
          [(activeComponent)]="activeComponent"
          [(activeComponent2)]="activeComponent2"
        ></app-page-component-config2>
      </div>
    }
  </div>
  <div class="menus">
    <div class="toolbar vertical">
      <button mat-icon-button color="primary" matTooltip="撤销(ctrl+z)" matTooltipPosition="left" [disabled]="!canUndo()" (click)="undo()">
        <mat-icon>undo</mat-icon>
      </button>
      <button mat-icon-button color="primary" matTooltip="恢复(ctrl+y)" matTooltipPosition="left" [disabled]="!canRedo()" (click)="redo()">
        <mat-icon>redo</mat-icon>
      </button>
    </div>
    <mat-tab-group [(selectedIndex)]="menuTabIndex">
      <mat-tab label="页面设置">
        <ng-scrollbar>
          <app-page-config class="tab" [(config)]="pageConfig" (configChange)="onPageConfigChanged($event)"></app-page-config>
        </ng-scrollbar>
      </mat-tab>
      <mat-tab label="图层管理">
        <ng-scrollbar>
          <app-page-component-config
            [(components)]="components"
            [(activeComponent)]="activeComponent"
            [(showComponentMenu)]="showComponentMenu"
          ></app-page-component-config>
        </ng-scrollbar>
      </mat-tab>
      <mat-tab label="页面管理"></mat-tab>
    </mat-tab-group>
  </div>
</div>
